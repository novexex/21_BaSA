# DAY 05 – SA
## Моделирование требований, диаграммы data flow, swimlane, state-transition

## Contents

1. [Chapter I](#chapter-i) \
    1.1. [Preamble](#preamble)
2. [Chapter II](#chapter-ii) \
    2.1. [General rules](#general-rules)
3. [Chapter III](#chapter-iii) \
    [Theory](#theory)  
    3.1. [Модели и моделирование требований](#модели_и_моделирование_требований)  
    3.2. [Диаграмма потоков данных](#диаграмма_потоков_данных)  
    3.3. [Диаграмма «плавательные дорожки»](#диаграмма_плавательные_дорожки)  
    3.4. [Расширение диаграммы swimlane](#расширение_диаграммы_swimlane)  
    3.5. [Диаграмма состояний](#диаграмма_состояний)     
4. [Chapter IV](#chapter-iv) \
    4.1. [Задача 1](#задача-1)  
    4.2. [Задача 2](#задача-2)
5. [Chapter V](#chapter-v) \
    5.1. [Exercise 00](#exercise-00)  
    5.2. [Exercise 01](#exercise-01)  
    5.3. [Exercise 02](#exercise-02)  
    5.4. [Exercise 03](#exercise-03)  
    5.4. [Exercise 04](#exercise-04)  
    5.4. [Exercise 05](#exercise-05)     

<h2 id="chapter-i" >Chapter I</h2>
<h2 id="preamble">Preamble</h2>  

В первом модуле вы познакомились с основными понятиями, с которыми работают аналитики в ИТ — заинтересованными сторонами, требованиями, классификацией требований и понятием предметной области.   
В этом модуле вы познакомитесь с методами, которые позволяют аналитикам описывать требования для быстрейшего их  понимания –  как создателями системы, так и окружающими. Способы представления требований различны – это и графические диаграммы, и таблицы, и текстовые описания.   
В этом проекте вы узнаете о диаграммах, их назначении и способах их создания. Научитесь создавать диаграмму потоков данных и "плавательных дорожек", диаграмму и таблицу состояний.

**Литература:**
1. Карл Вигерс, Джой Битти, «Разработка требований к программному обеспечению» издание третье, дополненное. 
2. Мартин Фаулер, Кендалл Скотт «UML основы Второе издание. Краткое руководство по унифицированному языку моделирования». 
3. Крэг Ларман «Применение UML и шаблонов проектирования. Введение в объектно-ориентированный анализ». 
4. BABOK v3 «Руководство к своду знаний по бизнес-анализу» IIBA. 
5. Дин Леффингуэлл, Дон Уидриг «Принципы работы с требованиями к программному обеспечению».  

<h2 id="chapter-ii" >Chapter II</h2>  
<h2 id="general-rules">General rules</h2> 

1. Всю дорогу вас будет сопровождать чувство неопределенности и острого дефицита информации: это нормально. Не забывайте, что информация в репозитории и Google всегда с вами. Как и пиры, и Slack. Общайтесь. Ищите. Опирайтесь на здравый смысл. Не бойтесь ошибиться.  
2. Будьте внимательны к источникам информации. Проверяйте. Думайте. Анализируйте. Сравнивайте.   
3. Будьте внимательны к тексту задания. Перечитайте несколько раз.   
4. Читайте примеры внимательно. В них может быть что-то, что не указано в явном виде в самом задании.  
5. Вам могут встретиться несоответствия, когда что-то новое в условиях задачи или примере противоречит уже известному. Если встретилось такое — попробуйте разобраться. Если не получилось — запишите вопрос в открытые вопросы и выясните в процессе работы. Не оставляйте открытые вопросы неразрешенными.   
6. Если задание кажется непонятным или невыполнимым — так только кажется. Попробуйте его декомпозировать. Скорее всего, отдельные части станут понятными.   
7. На пути вам встретятся разные задания. Те, что помечены звездочкой (*) — подходят для более дотошных. Они с повышенной сложностью и не обязательны к выполнению. Но если вы их сделаете, то получите дополнительный опыт и знания.  
8. Не пытайтесь обмануть систему и окружающих. В первую очередь вы обманете себя.  
9. Есть вопрос? Спроси своего соседа справа. Если это не помогло — соседа слева.  
10. Когда пользуетесь помощью — всегда разбирайтесь до конца: почему, как и зачем. Иначе помощь не будет иметь смысла.  
11. Всегда делайте push только в ветку develop! Ветка master будет проигнорирована. Работайте в директории src.  
12. В вашей директории не должно быть иных файлов, кроме тех, что обозначены в заданиях.   

<h2 id="chapter-iii">Chapter III</h2>
<h2 id="theory">Theory</h2>
<h2 id="модели_и_моделирование_требований">Модели и моделирование требований</h2>    
“Все модели неверны, но некоторые полезны”
Джордж Бокс

История создания успешных ИТ-проектов (и не только ИТ) говорит о том, что представление требований к проекту в одном виде не дает их полной картины (Алан Девис). Следует предоставить не только текстовое описание текущего состояния и функциональных требований, но и графическое представление (диаграммы разного рода), табличное (например, состояние различных артефактов в зависимости от условий), прототипы пользовательского интерфейса, отчетов и пр. Каждое такое представление показывает требования в каком-то отдельном разрезе и полностью освещая этот разрез. А сопоставление разных представлений позволяет выявить несоответствия, нестыковки, пропуски и просчеты. Поэтому необходимо осветить задуманную систему в разных моделях. 

**Модель** — упрощенное описание действительности, позволяющее исследовать или обрабатывать объект, содержит существенные свойства моделируемого объекта. Модель всегда проще системы и подсвечивает отдельный аспект(-ы) системы, например:

![Модель](misc/images/CH3.1.png) 

Строгость применения нотаций при моделировании определяется договоренностью в команде. В зависимости от целей, с которыми строим модели, назначения диаграммы, уровня участников, тех, кто будет читать, комментировать диаграмму. Диаграмму для обсуждения с заказчиком допустимо нарисовать проще, чем для применения внутри команды. Важно, чтобы команда была согласна (были приняты договоренности) и важно выполнять эти договоренности.  

Более полный список артефактов в привязке к моделям и их компонентам приведен в главе 12 книги К.Вигерса «Разработка требований к программному обеспечению», издание 3, табл.12-1. Принципы выбора наиболее подходящих моделей приведены в таблице 12-2.  

Мы рассмотрим несколько моделей визуального представления, показывающих систему в том или ином разрезе:
- диаграмма потоков данных;
- диаграмма «плавательные дорожки»;
- диаграмма состояний (или таблица состояний);
- диаграмма бизнес-процессов в нотации BPMN;
- а также вы уже рассмотрели контекстную диаграмму (модуль 1), которая является упрощенной диаграммой потоков данных.


Надо понимать, что диаграммы могут отражать как текущее состояние as is для выявления проблем (область проблем в терминологии инженерии требований), так и будущее, проектируемое состояние to be (область решений). При создании диаграммы вы должны всегда понимать к какой области относится то, что вы создаете.

Итак, перед тем, как приступать к построению диаграммы следует определить:  
- Цель построения диаграммы   
- Область рассмотрения: as is (область проблем) или to be (область решений)   
- Метод (вид диаграммы).


<h2 id="диаграмма_потоков_данных">Диаграмма потоков данных</h2>    

Диаграмма потоков данных (data flow diagrams, DFD) дает представление о том, как данные движутся внутри системы и между системой и внешним миром, отражает хранилища и потоки данных и материалов (строго говоря, информации о материалах, т.е. тоже потоки данных), которыми система управляет. Движение данных и материалов между внешней средой и системой (система как черный ящик) — это контекстная диаграмма, крайний случай диаграммы потоков данных. Далее, в процессе разработки, может быть построена более детальная диаграмма потоков данных, потоки между процессами или подсистемами внутри системы между собой и с внешними системами. Диаграмму потоков данных можно строить для уровня 0 и глубже, декомпозируя потоки и действия. Диаграмма потоков данных уровня 0 соответствует контекстной диаграмме, но с расширением до функций внутри системы.  

На диаграмме DFD могут отражаться люди или организации, являющиеся инициаторами передачи данных или получателями данных. Это наши стейкхолдеры (заинтересованные стороны). То есть диаграмма потоков данных должна коррелировать с каталогом заинтересованных сторон и с луковичной диаграммой — мы должны проверить эти соответствия и при необходимости устранить нестыковки. Но диаграмма не отражает последовательность процессов и действий. Не стремитесь отразить последовательность процессов на DFD!

Данные, содержащиеся в DFD — это те же данные, которые описаны в словаре данных. Поэтому также сравниваем, проверяем и исправляем их при необходимости.
И еще: все данные, которые входят в систему, должны для чего-то этой системой использоваться. Если они не используются, то они не нужны. И все данные, которые передаются системой наружу и используются внутри, должны откуда-то появиться (поступить в систему или быть созданными внутри системы) — это тоже подлежит проверке. 
Детально построение DFD описано в книге К.Вигерса, издание 3, глава 12, раздел «Диаграмма потоков данных».


<h2 id="диаграмма_плавательные_дорожки">Диаграмма «плавательные дорожки»</h2>    

Диаграмма swimlane (межфункциональная диаграмма, «плавательные дорожки») применяется для изучения и демонстрации бизнес-процессов, выполняемых пользователями и системой, взаимодействия пользователей между собой и/или отражения последовательности бизнес-процессов или действий в бизнес-процессе. Это то, что происходит внутри процесса в диаграмме потоков данных. Диаграмма разделена на дорожки, и в каждой дорожке действует та или иная роль, участвующая в работе системы, сама система или внешняя система. Иногда рассматривают только роли пользователей или подразделения, если требуется разобрать только их взаимодействие. Детально построение диаграммы описано в главе 12 К.Вигерса «Разработка требований к программному обеспечению», раздел «Диаграмма swimlane». 

Диаграмма позволяет проверить полноту ролевой модели — роли и выполняемые ими действия, взаимодействие с внешними системами, порядок выполнения действий. Иногда в диаграмму добавляют применяемые/порождаемые в каждом процессе/действии данные. И тогда есть возможность сверить с диаграммой потоков данных, выявить несоответствие, при необходимости — провести дообследование и устранить неточности. 

На рисунке - ЖЦ разработки ПО, представленное диаграммой “плавательные дорожки”. Показаны основные функции каждой роли и более детально - функции аналитика, как дополнение к ролику Day00, рассказывающем о функциях аналитика в разработке ПО.   
Для примера к ролику, содержащему описание роли и функций аналитика в разработке ПО построена диаграмма ЖЦ разработки ПО (Рис.1):  
1. Цель построения диаграммы: познакомить студентов ветки Системный анализ в ИТ.Beginner с жизненным циклом разработки ПО, ролью аналитика в разработке ПО и его функциями.  
2. Область рассмотрения: as is.  
3. Вид диаграммы: диаграмма дорожек.  

Рисунок 1
![ЖЦ разработки ПО](misc/images/CH3.2.png) 

<h2 id="расширение_диаграммы_swimlane">Расширение диаграммы swimlane</h2>    

Часто диаграмму “плавательные дорожки” расширяют, добавляя артефакты (документы, запросы, объекты, создаваемые представителями той или иной роли во время выполнения действий бизнес-процесса. На рисунке 2 показаны артефакты, создаваемые каждой ролью в процессе разработки и внедрения ИТ-системы, указаны действия или процессы, во время которых создается этот артефакт. Для облегчения чтения диаграммы, артефакты и их связи с действиями /процессами выделены синим, но это необязательная опция. Кроме того, на диаграмме разными элементами показаны процессы (прямоугольник с двумя линиями на вертикальных сторонах) и действия (прямоугольник). Процесс содержит несколько действий, не указанных на текущей диаграмме, но может быть расписан более детально на диаграмме следующего уровня.  

В данном случае нельзя сказать, что первая диаграмма - неправильная, хотя на ней не указаны процессы. Такое изображение процесса (простой прямоугольник, без двойных вертикальных сторон) достаточно распространено. Важно, чтобы вся команда это понимала.

Рисунок 2 

![Диаграммы swimlane](misc/images/CH3.3.png) 

<h2 id="диаграмма_состояний">Диаграмма состояний</h2>    

Диаграмма состояний показывает поведение конкретного объекта (класса) в системе, изменение состояний этого объекта под влиянием событий, происходящих в системе или внешних факторов. Диаграммы состояний обычно строят относительно одного или нескольких наиболее важных объектов системы. С помощью диаграммы для каждого состояния можно отследить:
- возможные состояния объекта в системе;  
- предыдущее состояние (состояние до события);  
- событие (действие), переводящее объект в другое состояние;  
- роль, инициирующая переход;  
- условия перехода в новое состояние (возможно переход в несколько состояний, в зависимости от условий);  
- тсостояние после события.  

На рисунке показана диаграмма состояний объекта Заявка из Задачи 1.

![Диаграмма состояний](misc/images/CH3.4.png) 

Эту же информацию можно представить и в таблице (показана частично).  

![Диаграмма состояний таблица](misc/images/CH2.1.png) 

<h2 id="chapter-iv" >Chapter IV</h2>

## Задача 1  
### Запись на стрижку (Sign up for a haircut) 

Руководство сети барбершопов приняло решение о внедрении системы, обеспечивающей онлайн-запись на прием. Основная цель — развитие бизнеса путем расширения клиентской базы за счет возможности онлайн-записи, а также снижение трудозатрат сотрудников и уменьшение ручного труда за счет автоматического информирования клиентов по каналам связи.   

Запись может осуществлять как зарегистрированный, так и незарегистрированный посетитель сайта. При записи можно выбрать тип услуги: парикмахерские или косметологические, а также саму услугу, мастера и время из свободных интервалов. Система должна обеспечивать автоматическую отправку напоминаний клиентам через выбранный клиентом канал связи (тг, вотсап, vk, смс) по настроенному менеджером расписанию. После получения услуги система предлагает клиенту оценить услугу и написать предложения по улучшению работы.  

Расписание мастеров и выполняемые каждым мастером услуги должен вводить менеджер, возможно это будет не один человек. Он же отвечает за актуальность расписания и при необходимости корректирует его, осуществляет связь с клиентами в ручном режиме, проставляет отметку о выполнении услуги, начисляет и принимает оплату, передает данные об оплате в бухгалтерию. Также менеджер может получать отчеты о выполненных услугах и просматривать отзывы клиентов.
Любой мастер имеет возможность посмотреть расписание и запись на свои услуги, отзывы клиентов. 


## Задача 2  
### Доставка заказов (Delivery of orders)  

В локдаун многие продуктовые магазины и предприятия питания резко увеличили объемы онлайн-продаж, и возросла потребность в быстрой доставке мелких партий товаров индивидуальным клиентам. Компания студентов собрались и решила создать стартап службы доставки. Идея состоит в том, чтобы оперативно получать информацию о заказах, месте и сроке комплектации, месте доставки, желаемых сроках доставки и раздавать инфо курьерам, которые будут получать заказ в месте комплектации и доставлять в место доставки.  

Решили развернуть онлайн-систему, куда стекаются заказы и откуда курьеры оперативно разбирают заказы для выполнения. На первом этапе решили собирать заказы от магазинов и предприятий питания любым доступным способом и вводить в систему в едином формате силами оператора, но разработать мобильное приложение для курьеров. Курьер должен иметь возможность просматривать информацию о заказах, выбирать заказ из свободных, бронировать его, забирать в точке выдачи и доставлять  клиенту.  

Результат своих действий курьер должен оперативно отражать в системе через мобильное приложение. Также в системе должен работать диспетчер, который контролирует курьеров и при необходимости переназначает заказы. Информация о поступивших заказах должна направляться в бухгалтерию (в другую ИТ-систему) для расчета с поставщиками заказов за доставку. Также в бухгалтерию должна направляться информация о доставке заказа, где будет производиться расчет оплаты курьеров. Начисленная оплата должна передаваться в систему и отражаться в личном кабинете курьера. И еще запланировано рабочее место администратора, регистрирующего курьеров и назначающего всем права доступа.

<h2 id="chapter-v">Chapter V</h2>   

## Exercise 00 
### Building DFD, level 0 (Построение диаграммы потоков данных, уровень 0) 

Для каждой задачи:  
Построить диаграмму потоков данных уровня 0:  

1. Указать цель построения диаграммы.   
2. Указать область рассмотрения: as is или to be.   
3. Отразить в прямоугольниках на диаграмме внешние сущности, взаимодействующие с системой.
4. Отразить в овалах процессы (действия заинтересованных сторон над данными).
5. Отразить на стрелках содержание потоков информации.
6. Отразить в отрезках параллельных прямых хранилища данных и содержание хранимой в системе информации.
7. Выполнить следующие правила:
- Все процессы (овалы) должны быть пронумерованы. На диаграмме уровня 0 — целыми числами.  
- Процессы названы: глагол+ объект.   
- Для обозначения объекта применяются понятные названия предметной области (не технические названия сущностей БД системы).  
- Процессы взаимодействуют не напрямую между собой, а через хранилища данных.  
- Потоки данных передаются между хранилищами и внешним сущностям или между собой через процесс (не напрямую).   
- Диаграмма не отражает последовательность процессов и действий.  
- Диаграмма должна быть читаемой.   
8. Указать ваши ответы в файле ex00_<префикс продукта>_dfd.xxx (xxx — расширение файла).   
 

## Exercise 01
### Building a Swimlane diagram (Построение диаграммы «плавательные дорожки»)

Для каждой задачи:  
Построить диаграмму «плавательные дорожки»:  

1. Указать цель построения диаграммы.  
2. Указать область рассмотрения: as is или to be.  
3. Выбрать действующие роли для диаграммы: заинтересованные стороны, подразделения, внешние системы.   
4. Отразить на диаграмме дорожки для ролей.   
5. Показать шаги процесса в виде прямоугольников.  
6. Отобразить шаги процесса, выполняемые ролью, на соответствующей дорожке.  
7. Показать переходы между шагами процесса стрелками.  
8. Решения отразить ромбами.  
9. Отразить варианты решений на стрелках, выходящих из ромба.  
10. Отразить начальным/завершающим кружком начало и конец процесса.  
11. Указать ваши ответы в файле ex01_<префикс продукта>_swd.xxx (xxx — расширение файла).  

## Exercise 02  
### Addition a Swimlane diagram (Дополнение диаграммы «плавательные дорожки»)  

Для каждой задачи дополнить диаграмму «плавательные дорожки» создаваемыми артефактами:  
1. Скопировать диаграмму “плавательные дорожки”, изменить наименование.  
2. Указать цель построения диаграммы.  
3. Указать область рассмотрения: as is или to be.  
4. Добавить на диаграмму “плавательные дорожки” для каждой роли создаваемые ей артефакты: документы, разработанный код, зарегистрированные ошибки, запросы и т.д.   
- Для каждой роли на дорожке показать артефакты, которые разрабатывают или корректируют представители роли, отразить на дорожке роли. 
- Для каждого артефакта указать пунктирной линией связь с источником, где создается /корректируется артефакт.  
- Допустимо группировать артефакты, т.е. указывать несколько артефактов в одном пуле, если они создаются одной ролью в одном процессе (или при выполнении одного действия).  
5. Указать ваши ответы в turn-in файле ex02_<префикс продукта>_adswd.(xxx — расширение файла).  


## Exercise 03  
### State diagram (Диаграмма состояний)   

Для каждой задачи:  
1. Выбрать объект (сущность предметной области), имеющий жизненный цикл. В задаче 1 - исключая объект Заявка на услугу.  
2. Указать цель построения диаграммы.
3. Указать область рассмотрения: as is или to be.
4. Построить диаграмму состояний выбранного объекта:
- Выбрать названия состояний объекта.
- Указать на диаграмме каждое состояния объекта.
- Соединить стрелками предыдущее и последующее состояния объектов.
- Указать рядом со стрелкой событие (действие), переводящее объект из одного состояния в другое.
- Указать инициатора каждого события (действия).
- При наличии развилок указать условия.
- Указать начало и окончание жизненного цикла объекта.
5. Указать ваши ответы в файле ex04_<префикс продукта>_dst.xxx (xxx — расширение файла).

## Exercise 04   
### State table (Таблица состояний) 

Для каждой задачи:
1. Выбрать объекты (сущности предметной области), имеющие жизненный цикл. Для объекта, по которому не построена полная диаграмма состояний объекта:
2. Указать объект.
3. Указать цель построения таблицы.
4. Указать область рассмотрения: as is или to be.
5. Построить таблицу состояний:
- Выбрать названия состояний объекта;
- Указать в строке таблицы:
   - предыдущее и последующее состояния объекта,
   - событие (действие), переводящее объект из предыдущего состояния в последующее,
   - инициатора каждого события (действия),
   - при наличии развилок - указать условия;
- Указать начало и окончание жизненного цикла объекта.
6. Указать ваши ответы в turn-in файле ex04_<префикс продукта>_tst.xxx (xxx — расширение файла).  

>Пожалуйста, оставьте обратную связь по проекту в [форме обратной связи.](https://forms.gle/wVfdwkhGU6YNfnQS9)

